<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<title>Word Parts</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">
body{ background-color: #000; font: 32px Helvetica, Arial; color: #fff; }

input, select { font: 32px Helvetica, Arial;}

#cor, #err { width: 100%; height: 100px; }
</style>
</head>
<body>
  <select id="wpc" onchange="changelist(this);">
    <option disabled selected>Select Word Parts List</option>
  </select>
  <br><br>
  <div id="test" style="display: none">
  
  <div id="cor" style="display: none;background-color: green;">Correct!</div> 
  <div id="err" style="display: none;background-color: red;">Sorry, Wrong!</div>

  <p id="wrd"></p>
  <form id="test" onsubmit="check();return false"> 
  <input type="text" autocomplete="off" id="in"> 
  </form> 
  
  </div>


<script type="text/javascript">

//ello! poopy!

var words = {};
var index = [];
var fin = [];
var curw = 0;

$(function(){
  $("#wpc")[0].selectedIndex = 0;
})


$.get("lists.txt",{},function(e){
  $.each(e.replace(/\r/g, "").split("\n"), function(){
    var nEl = $("<option></option>");
    nEl.val(this);
    nEl.text("Word Parts #"+this);
    
    nEl.appendTo($("#wpc"))
  })
},"text")


function updateword(){
  $("#wrd").html("What does <i>"+index[curw]+"</i> mean?");
}

function changelist(s){
  $("#test").fadeOut("slow", function(){

  index = [];
  fin = [];
  words = {};
  curw = 0;

  $("#cor").hide();
  $("#err").hide();

  $.get("wpl/"+$("#wpc")[0].value+".txt",{ck: Math.random()},function(e){
    var ln = e.split("\n");
    $.each(ln, function(){
      var x = this.replace(/\r/g, "").split(",")
      words[x[0]] = x[1];
    })
    
    for(var i in words){
      index.push(i);
    }

    updateword();
    $("#test").fadeIn("slow");
      $("#in").focus();

  },"text")
  });
}


function check(){
  $("#cor").hide();
  $("#err").hide();
  if(words[index[curw]].toLowerCase() == $("#in").val().toLowerCase()){
    $("#cor").html("Correct!<br> <i>"+index[curw]+"</i> means <i>"+words[index[curw]]+"</i>")
    $("#cor").fadeIn("slow")
    
  }else{
    $("#err").html("Sorry, Wrong!<br> <i>"+index[curw]+"</i> means <i>"+words[index[curw]]+"</i>")
    $("#err").fadeIn("slow")
  }
  
  fin.push(index.splice(curw,1))
  
  curw = Math.floor(index.length*Math.random())
  
  if(index.length == 0){
    index = fin.slice(0);
    fin = []
    curw = 0
  }
  
  updateword();
  
  $("#in").val("")
  
}



</script>
</body>
</html>